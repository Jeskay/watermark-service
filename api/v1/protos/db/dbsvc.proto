syntax = "proto3";

package db;

option go_package = "watermark-service/api/v1/protos/db";

import "watermark/watermarksvc.proto";

service database {
    rpc Get (GetRequest) returns (GetResponse) {}
    rpc Remove (RemoveRequest) returns (RemoveResponse) {}
    rpc Add (AddRequest) returns (AddResponse) {}
    rpc ServiceStatus (ServiceStatusRequest) returns (ServiceStatusResponse) {}
}

message Document {
    bytes author_id = 1;
    bytes ticket_id = 2;
    string title = 3;
    string image_url = 4;
}

message GetRequest {
    message Filters {
        string key = 1;
        string value = 2;
    }
    repeated Filters filters = 1;
}

message GetResponse {
    repeated Document documents = 1;
    string err = 2;
}

message RemoveRequest {
    string ticketID = 1;
}

message RemoveResponse {
    int64 code = 1;
    string err = 2;
}

message AddRequest {
    optional watermark.Image logo = 1;
    watermark.Image image = 2;
    string text = 3;
    bool fill = 4;
    watermark.Position pos = 5;
}

message AddResponse {
    string ticketID = 1;
    string err = 2;
}

message ServiceStatusRequest {}

message ServiceStatusResponse {
    int64 code = 1;
    string err = 2;
}